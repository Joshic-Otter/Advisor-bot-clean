<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Advisor KB Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>body{font-family:system-ui;margin:20px;max-width:680px} textarea{width:100%;height:90px}</style>
  </head>
  <body>
    <h1>Advisor KB Test</h1>
    <textarea id="q" placeholder="Type your question...">How do I swap a class?</textarea><br/>
    <button id="ask">Ask</button>
    <pre id="out"></pre>

    <script>
      document.getElementById('ask').onclick = async () => {
        const message = document.getElementById('q').value.trim();
        const r = await fetch('/api/chat/answer', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({ message })
        });
        const data = await r.json();
        const a = (data && data.answer) || {};
        document.getElementById('out').textContent =
`Bottom line: ${a.bottom_line || ''}
Why: ${a.why || ''}
Next steps: ${a.next || ''}
Heads-up: ${a.heads_up || ''}
Sources: ${(a.sources||[]).join('\n')}`;
      };
    </script>
  </body>
</html>
